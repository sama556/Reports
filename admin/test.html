<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Dashboard | StratAnalytica</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* Dashboard specific styles */
        .dashboard-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: calc(100vh - 60px);
        }
        
        .dashboard-sidebar {
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
        }
        
        .dashboard-sidebar .project-info {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }
        
        .dashboard-sidebar .project-info h2 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #fff;
        }
        
        .dashboard-sidebar .project-info .project-status {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .status-active {
            background-color: #2ecc71;
        }
        
        .status-pending {
            background-color: #f39c12;
        }
        
        .status-completed {
            background-color: #3498db;
        }
        
        .status-cancelled {
            background-color: #e74c3c;
        }
        
        .dashboard-sidebar .project-meta {
            font-size: 13px;
            color: #ecf0f1;
            margin-bottom: 5px;
        }
        
        .dashboard-sidebar .project-meta i {
            width: 20px;
            color: #bdc3c7;
        }
        
        .dashboard-sidebar nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .dashboard-sidebar nav li {
            margin-bottom: 5px;
        }
        
        .dashboard-sidebar nav a {
            display: block;
            padding: 10px 20px;
            color: #ecf0f1;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .dashboard-sidebar nav a:hover {
            background-color: rgba(255,255,255,0.1);
        }
        
        .dashboard-sidebar nav a.active {
            background-color: #3498db;
        }
        
        .dashboard-sidebar nav a i {
            width: 20px;
            margin-right: 10px;
        }
        
        .dashboard-content {
            padding: 20px;
            background-color: #f5f7fa;
        }
        
        .dashboard-section {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .dashboard-section h3 {
            margin-top: 0;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            color: #2c3e50;
        }
        
        /* Data Sources Section */
        .data-sources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .data-source-card {
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            transition: all 0.3s;
        }
        
        .data-source-card:hover {
            border-color: #3498db;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .data-source-card h4 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .data-source-meta {
            font-size: 13px;
            color: #7f8c8d;
            margin-bottom: 10px;
        }
        
        .data-source-actions {
            display: flex;
            gap: 10px;
        }
        
        .data-source-actions button {
            padding: 5px 10px;
            font-size: 12px;
            border-radius: 4px;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background-color: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
        }
        
        .btn-secondary {
            background-color: #ecf0f1;
            color: #2c3e50;
        }
        
        .btn-secondary:hover {
            background-color: #bdc3c7;
        }
        
        /* KPIs Section */
        .kpi-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .kpi-card {
            border-left: 4px solid #3498db;
            background-color: #f8f9fa;
            border-radius: 4px;
            padding: 15px;
        }
        
        .kpi-card h4 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .kpi-value {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .kpi-progress {
            height: 6px;
            background-color: #ecf0f1;
            border-radius: 3px;
            margin-bottom: 10px;
        }
        
        .kpi-progress-bar {
            height: 100%;
            border-radius: 3px;
            background-color: #3498db;
        }
        
        .kpi-target {
            font-size: 12px;
            color: #7f8c8d;
        }
        
        /* Notifications Section */
        .notifications-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .notification-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: all 0.3s;
        }
        
        .notification-item:hover {
            background-color: #f8f9fa;
        }
        
        .notification-item.unread {
            background-color: #f0f7fd;
        }
        
        .notification-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .notification-title {
            font-weight: bold;
            color: #2c3e50;
            margin: 0;
        }
        
        .notification-time {
            font-size: 12px;
            color: #7f8c8d;
        }
        
        .notification-content {
            font-size: 14px;
            color: #34495e;
            margin-bottom: 5px;
        }
        
        .notification-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .notification-actions button {
            padding: 3px 8px;
            font-size: 12px;
            border-radius: 3px;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
        }
        
        /* Progress Dashboard Section */
        .progress-dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .progress-chart {
            height: 300px;
            background-color: #f8f9fa;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .progress-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .metric-card {
            background-color: #f8f9fa;
            border-radius: 6px;
            padding: 15px;
            text-align: center;
        }
        
        .metric-card h4 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .metric-description {
            font-size: 12px;
            color: #95a5a6;
        }
        
        /* Send Notification Form */
        .notification-form {
            display: grid;
            gap: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }
            
            .dashboard-sidebar {
                display: none;
            }
            
            .progress-dashboard {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-container">
            <a href="#" class="logo">
                <i class="fas fa-chart-network"></i>
                <span>StratAnalytica</span>
            </a>
            <nav>
                <ul>
                    <li><a href="#"><i class="fas fa-bell"></i> Notifications</a></li>
                    <li><a href="update-profile.html"><i class="fas fa-user"></i> Profile</a></li>
                    <li><a href="../langingPage.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="dashboard-container">
        <!-- Project Dashboard Sidebar -->
        <aside class="dashboard-sidebar">
            <div class="project-info">
                <h2 id="projectName">Project Name</h2>
                <span class="project-status" id="projectStatus">Active</span>
                
                <div class="project-meta">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="projectDates">Jan 1, 2023 - Dec 31, 2023</span>
                </div>
                <div class="project-meta">
                    <i class="fas fa-user"></i>
                    <span id="projectCreator">Created by: John Doe</span>
                </div>
                <div class="project-meta">
                    <i class="fas fa-chart-pie"></i>
                    <span id="projectProgress">Progress: 65%</span>
                </div>
            </div>
            
            <nav>
                <ul>
                    <li><a href="#" class="active" id="dashboardLink"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="#" id="dataSourcesLink"><i class="fas fa-database"></i> Data Sources</a></li>
                    <li><a href="#" id="kpisLink"><i class="fas fa-tachometer-alt"></i> KPIs</a></li>
                    <li><a href="#" id="notificationsLink"><i class="fas fa-bell"></i> Notifications</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Project Dashboard Content -->
        <main class="dashboard-content">
            <!-- Dashboard Overview Section (default view) -->
            <section id="dashboardSection" class="dashboard-section">
                <h3><i class="fas fa-tachometer-alt"></i> Project Dashboard</h3>
                
                <div class="progress-dashboard">
                    <div class="progress-chart">
                        [Project Progress Chart Placeholder]
                    </div>
                    <div class="progress-metrics">
                        <div class="metric-card">
                            <h4>Days Remaining</h4>
                            <div class="metric-value" id="daysRemaining">45</div>
                            <div class="metric-description">Until project deadline</div>
                        </div>
                        <div class="metric-card">
                            <h4>Tasks Completed</h4>
                            <div class="metric-value" id="tasksCompleted">28</div>
                            <div class="metric-description">Out of 42 total tasks</div>
                        </div>
                        <div class="metric-card">
                            <h4>Budget Used</h4>
                            <div class="metric-value" id="budgetUsed">$42,500</div>
                            <div class="metric-description">Out of $60,000 budget</div>
                        </div>
                        <div class="metric-card">
                            <h4>Team Members</h4>
                            <div class="metric-value" id="teamMembers">8</div>
                            <div class="metric-description">Working on this project</div>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h4>Recent Activity</h4>
                    <div class="notifications-list">
                        <div class="notification-item unread">
                            <div class="notification-header">
                                <div class="notification-title">Task Completed</div>
                                <div class="notification-time">2 hours ago</div>
                            </div>
                            <div class="notification-content">
                                "User Dashboard Design" task was marked as completed by Sarah Johnson.
                            </div>
                        </div>
                        <div class="notification-item">
                            <div class="notification-header">
                                <div class="notification-title">New Comment</div>
                                <div class="notification-time">5 hours ago</div>
                            </div>
                            <div class="notification-content">
                                Michael Chen added a comment on "API Integration" task: "Need clarification on endpoint specifications."
                            </div>
                        </div>
                        <div class="notification-item">
                            <div class="notification-header">
                                <div class="notification-title">Data Source Updated</div>
                                <div class="notification-time">1 day ago</div>
                            </div>
                            <div class="notification-content">
                                The "Customer Database" data source was updated with new records.
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Data Sources Section (hidden by default) -->
            <section id="dataSourcesSection" class="dashboard-section" style="display: none;">
                <h3><i class="fas fa-database"></i> Data Sources Management</h3>
                
                <div class="data-sources-grid">
                    <div class="data-source-card">
                        <h4>Customer Database</h4>
                        <div class="data-source-meta">
                            <i class="fas fa-calendar-alt"></i> Last updated: 2 days ago
                        </div>
                        <div class="data-source-meta">
                            <i class="fas fa-table"></i> 12,548 records
                        </div>
                        <div class="data-source-actions">
                            <button class="btn-primary"><i class="fas fa-eye"></i> View</button>
                            <button class="btn-secondary"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>
                    </div>
                    
                    <div class="data-source-card">
                        <h4>Sales Transactions</h4>
                        <div class="data-source-meta">
                            <i class="fas fa-calendar-alt"></i> Last updated: 1 hour ago
                        </div>
                        <div class="data-source-meta">
                            <i class="fas fa-table"></i> 8,742 records
                        </div>
                        <div class="data-source-actions">
                            <button class="btn-primary"><i class="fas fa-eye"></i> View</button>
                            <button class="btn-secondary"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>
                    </div>
                    
                    <div class="data-source-card">
                        <h4>Product Inventory</h4>
                        <div class="data-source-meta">
                            <i class="fas fa-calendar-alt"></i> Last updated: 5 days ago
                        </div>
                        <div class="data-source-meta">
                            <i class="fas fa-table"></i> 1,245 records
                        </div>
                        <div class="data-source-actions">
                            <button class="btn-primary"><i class="fas fa-eye"></i> View</button>
                            <button class="btn-secondary"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>
                    </div>
                    
                    <div class="data-source-card">
                        <h4>Web Analytics</h4>
                        <div class="data-source-meta">
                            <i class="fas fa-calendar-alt"></i> Last updated: 15 minutes ago
                        </div>
                        <div class="data-source-meta">
                            <i class="fas fa-table"></i> 24,891 records
                        </div>
                        <div class="data-source-actions">
                            <button class="btn-primary"><i class="fas fa-eye"></i> View</button>
                            <button class="btn-secondary"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="btn-primary" id="addDataSourceBtn">
                        <i class="fas fa-plus"></i> Add New Data Source
                    </button>
                </div>
            </section>
            
            <!-- KPIs Section (hidden by default) -->
            <section id="kpisSection" class="dashboard-section" >
                <h3><i class="fas fa-tachometer-alt"></i> Key Performance Indicators</h3>
                
                <div class="kpi-cards">
                    <div class="kpi-card">
                        <h4>User Engagement</h4>
                        <div class="kpi-value">78%</div>
                        <div class="kpi-progress">
                            <div class="kpi-progress-bar" style="width: 78%"></div>
                        </div>
                        <div class="kpi-target">Target: 85%</div>
                    </div>
                    
                    <div class="kpi-card">
                        <h4>Conversion Rate</h4>
                        <div class="kpi-value">3.2%</div>
                        <div class="kpi-progress">
                            <div class="kpi-progress-bar" style="width: 64%"></div>
                        </div>
                        <div class="kpi-target">Target: 5%</div>
                    </div>
                    
                    <div class="kpi-card">
                        <h4>Customer Satisfaction</h4>
                        <div class="kpi-value">4.5/5</div>
                        <div class="kpi-progress">
                            <div class="kpi-progress-bar" style="width: 90%"></div>
                        </div>
                        <div class="kpi-target">Target: 4.7/5</div>
                    </div>
                    
                    <div class="kpi-card">
                        <h4>System Uptime</h4>
                        <div class="kpi-value">99.8%</div>
                        <div class="kpi-progress">
                            <div class="kpi-progress-bar" style="width: 99.8%"></div>
                        </div>
                        <div class="kpi-target">Target: 99.9%</div>
                    </div>
                    
                    <div class="kpi-card">
                        <h4>Response Time</h4>
                        <div class="kpi-value">1.2s</div>
                        <div class="kpi-progress">
                            <div class="kpi-progress-bar" style="width: 80%"></div>
                        </div>
                        <div class="kpi-target">Target: 1s</div>
                    </div>
                    
                    <div class="kpi-card">
                        <h4>Task Completion</h4>
                        <div class="kpi-value">67%</div>
                        <div class="kpi-progress">
                            <div class="kpi-progress-bar" style="width: 67%"></div>
                        </div>
                        <div class="kpi-target">Target: 75%</div>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="btn-primary" id="addKPIBtn">
                        <i class="fas fa-plus"></i> Add New KPI
                    </button>
                </div>
            </section>
            
            <!-- Notifications Section (hidden by default) -->
            <section id="notificationsSection" class="dashboard-section">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h3><i class="fas fa-bell"></i> Received Notifications</h3>
                        <div class="notifications-list">
                            <div class="notification-item unread">
                                <div class="notification-header">
                                    <div class="notification-title">Task Assignment</div>
                                    <div class="notification-time">Today, 10:30 AM</div>
                                </div>
                                <div class="notification-content">
                                    You have been assigned to "Dashboard UI Implementation" task by Project Manager.
                                </div>
                                <div class="notification-actions">
                                    <button class="btn-secondary" style="font-size: 11px;">Mark as Read</button>
                                    <button class="btn-primary" style="font-size: 11px;">View Task</button>
                                </div>
                            </div>
                            
                            <div class="notification-item unread">
                                <div class="notification-header">
                                    <div class="notification-title">Meeting Reminder</div>
                                    <div class="notification-time">Today, 9:15 AM</div>
                                </div>
                                <div class="notification-content">
                                    Project status meeting scheduled for today at 2:00 PM in Conference Room B.
                                </div>
                                <div class="notification-actions">
                                    <button class="btn-secondary" style="font-size: 11px;">Mark as Read</button>
                                    <button class="btn-primary" style="font-size: 11px;">Add to Calendar</button>
                                </div>
                            </div>
                            
                            <div class="notification-item">
                                <div class="notification-header">
                                    <div class="notification-title">Data Update</div>
                                    <div class="notification-time">Yesterday, 4:45 PM</div>
                                </div>
                                <div class="notification-content">
                                    The customer database has been updated with new records. Please refresh your data sources.
                                </div>
                                <div class="notification-actions">
                                    <button class="btn-secondary" style="font-size: 11px;">Mark as Read</button>
                                    <button class="btn-primary" style="font-size: 11px;">Refresh Data</button>
                                </div>
                            </div>
                            
                            <div class="notification-item">
                                <div class="notification-header">
                                    <div class="notification-title">Approval Required</div>
                                    <div class="notification-time">Yesterday, 11:20 AM</div>
                                </div>
                                <div class="notification-content">
                                    The "User Registration Flow" design is pending your approval before implementation can begin.
                                </div>
                                <div class="notification-actions">
                                    <button class="btn-secondary" style="font-size: 11px;">Mark as Read</button>
                                    <button class="btn-primary" style="font-size: 11px;">Review Design</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3><i class="fas fa-paper-plane"></i> Send Notification</h3>
                        <div class="notification-form">
                            <div class="form-group">
                                <label for="notificationRecipient">Recipient</label>
                                <select id="notificationRecipient">
                                    <option value="">Select Recipient</option>
                                    <option value="all">All Team Members</option>
                                    <option value="developers">Developers</option>
                                    <option value="designers">Designers</option>
                                    <option value="managers">Project Managers</option>
                                    <option value="specific">Specific Person</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="notificationSubject">Subject</label>
                                <input type="text" id="notificationSubject" placeholder="Notification subject">
                            </div>
                            
                            <div class="form-group">
                                <label for="notificationMessage">Message</label>
                                <textarea id="notificationMessage" placeholder="Type your notification message here"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="notificationPriority">Priority</label>
                                <select id="notificationPriority">
                                    <option value="normal">Normal</option>
                                    <option value="high">High</option>
                                    <option value="urgent">Urgent</option>
                                </select>
                            </div>
                            
                            <div class="form-actions">
                                <button class="btn-secondary" id="cancelNotificationBtn">Cancel</button>
                                <button class="btn-primary" id="sendNotificationBtn">Send Notification</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        // Get URL parameters to identify the project
        const urlParams = new URLSearchParams(window.location.search);
        const projectId = urlParams.get('id');
        
        // Sample project data - in a real app, this would come from an API
        const projects = [
            { 
                id: 1, 
                name: 'Website Redesign', 
                startDate: '2023-05-01', 
                endDate: '2023-07-15', 
                status: 'completed', 
                createdBy: 'John Doe',
                description: 'Complete overhaul of the company website with modern design and improved UX.',
                progress: 100,
                kpis: 8,
                dataSources: 3
            },
            { 
                id: 2, 
                name: 'Mobile App Development', 
                startDate: '2023-06-10', 
                endDate: '2023-09-30', 
                status: 'active', 
                createdBy: 'Jane Smith',
                description: 'Developing a new mobile application for both iOS and Android platforms.',
                progress: 65,
                kpis: 12,
                dataSources: 5
            },
            { 
                id: 3, 
                name: 'CRM Implementation', 
                startDate: '2023-07-15', 
                endDate: '2023-10-20', 
                status: 'pending', 
                createdBy: 'Mike Johnson',
                description: 'Implementation of a new Customer Relationship Management system.',
                progress: 30,
                kpis: 15,
                dataSources: 7
            },
            { 
                id: 4, 
                name: 'Marketing Campaign', 
                startDate: '2023-08-01', 
                endDate: '2023-08-31', 
                status: 'cancelled', 
                createdBy: 'Sarah Williams',
                description: 'Q3 Marketing campaign for new product launch.',
                progress: 45,
                kpis: 6,
                dataSources: 2
            },
            { 
                id: 5, 
                name: 'Data Analytics Platform', 
                startDate: '2023-09-01', 
                endDate: '2023-12-31', 
                status: 'active', 
                createdBy: 'Robert Chen',
                description: 'Building a new data analytics platform with advanced visualization capabilities.',
                progress: 40,
                kpis: 18,
                dataSources: 9
            },
            { 
                id: 6, 
                name: 'Office Relocation', 
                startDate: '2023-10-15', 
                endDate: '2023-11-30', 
                status: 'pending', 
                createdBy: 'Emma Davis',
                description: 'Planning and executing the relocation of headquarters to a new office space.',
                progress: 15,
                kpis: 5,
                dataSources: 2
            }
        ];
        
        // DOM elements
        const projectNameEl = document.getElementById('projectName');
        const projectStatusEl = document.getElementById('projectStatus');
        const projectDatesEl = document.getElementById('projectDates');
        const projectCreatorEl = document.getElementById('projectCreator');
        const projectProgressEl = document.getElementById('projectProgress');
        
        const dashboardLink = document.getElementById('dashboardLink');
        const dataSourcesLink = document.getElementById('dataSourcesLink');
        const kpisLink = document.getElementById('kpisLink');
        const notificationsLink = document.getElementById('notificationsLink');
        
        const dashboardSection = document.getElementById('dashboardSection');
        const dataSourcesSection = document.getElementById('dataSourcesSection');
        const kpisSection = document.getElementById('kpisSection');
        const notificationsSection = document.getElementById('notificationsSection');
        
        const addDataSourceBtn = document.getElementById('addDataSourceBtn');
        const addKPIBtn = document.getElementById('addKPIBtn');
        const sendNotificationBtn = document.getElementById('sendNotificationBtn');
        const cancelNotificationBtn = document.getElementById('cancelNotificationBtn');
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            // Find the project in our sample data
            const project = projects.find(p => p.id === parseInt(projectId));
            
            if (project) {
                // Update the project info in the sidebar
                projectNameEl.textContent = project.name;
                projectDatesEl.textContent = `${formatDate(project.startDate)} - ${formatDate(project.endDate)}`;
                projectCreatorEl.textContent = `Created by: ${project.createdBy}`;
                projectProgressEl.textContent = `Progress: ${project.progress}%`;
                
                // Set the status with appropriate class
                projectStatusEl.textContent = capitalizeFirstLetter(project.status);
                projectStatusEl.className = 'project-status';
                
                switch (project.status) {
                    case 'active': projectStatusEl.classList.add('status-active'); break;
                    case 'completed': projectStatusEl.classList.add('status-completed'); break;
                    case 'pending': projectStatusEl.classList.add('status-pending'); break;
                    case 'cancelled': projectStatusEl.classList.add('status-cancelled'); break;
                }
                
                // Update days remaining in dashboard
                const daysRemaining = calculateDaysRemaining(project.endDate);
                document.getElementById('daysRemaining').textContent = daysRemaining;
                
                // Update other metrics based on project (simplified for demo)
                document.getElementById('tasksCompleted').textContent = Math.floor(project.progress * 0.42);
                document.getElementById('budgetUsed').textContent = `$${(project.progress * 600).toLocaleString()}`;
                document.getElementById('teamMembers').textContent = Math.max(3, Math.floor(project.dataSources * 1.5));
            } else {
                // Project not found - show error and redirect
                Swal.fire({
                    title: 'Project Not Found',
                    text: 'The requested project could not be found.',
                    icon: 'error',
                    confirmButtonText: 'Back to Projects'
                }).then(() => {
                    window.location.href = 'view-projects.html';
                });
            }
            
            // Set up navigation links
            dashboardLink.addEventListener('click', (e) => {
                e.preventDefault();
                showSection('dashboard');
            });
            
            dataSourcesLink.addEventListener('click', (e) => {
                e.preventDefault();
                showSection('dataSources');
            });
            
            kpisLink.addEventListener('click', (e) => {
                e.preventDefault();
                showSection('kpis');
            });
            
            notificationsLink.addEventListener('click', (e) => {
                e.preventDefault();
                showSection('notifications');
            });
            
            // Set up buttons
            addDataSourceBtn.addEventListener('click', () => {
                Swal.fire({
                    title: 'Add New Data Source',
                    html: `
                        <div style="text-align: left;">
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Data Source Name</label>
                                <input id="dataSourceName" class="swal2-input" placeholder="e.g., Customer Database">
                            </div>
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Connection Type</label>
                                <select id="dataSourceType" class="swal2-select">
                                    <option value="database">Database</option>
                                    <option value="api">API</option>
                                    <option value="file">File Upload</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Connection Details</label>
                                <textarea id="dataSourceDetails" class="swal2-textarea" placeholder="Connection string, API endpoint, etc."></textarea>
                            </div>
                        </div>
                    `,
                    focusConfirm: false,
                    preConfirm: () => {
                        return {
                            name: document.getElementById('dataSourceName').value,
                            type: document.getElementById('dataSourceType').value,
                            details: document.getElementById('dataSourceDetails').value
                        };
                    }
                }).then((result) => {
                    if (result.isConfirmed) {
                        Swal.fire({
                            title: 'Data Source Added',
                            text: `The data source "${result.value.name}" has been added successfully.`,
                            icon: 'success'
                        });
                    }
                });
            });
            
            addKPIBtn.addEventListener('click', () => {
                Swal.fire({
                    title: 'Add New KPI',
                    html: `
                        <div style="text-align: left;">
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">KPI Name</label>
                                <input id="kpiName" class="swal2-input" placeholder="e.g., Conversion Rate">
                            </div>
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Target Value</label>
                                <input id="kpiTarget" class="swal2-input" placeholder="e.g., 5.0">
                            </div>
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Unit</label>
                                <select id="kpiUnit" class="swal2-select">
                                    <option value="percentage">Percentage (%)</option>
                                    <option value="number">Number</option>
                                    <option value="currency">Currency</option>
                                    <option value="time">Time</option>
                                    <option value="rating">Rating (1-5)</option>
                                </select>
                            </div>
                            <div style="margin-bottom: 15px;"> 